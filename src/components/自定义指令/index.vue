<template>
  <div>
    <div v-dom-bgc="bgcColor" style="margin-top: 36px; height: 240px">
      <h3>vue3è‡ªå®šä¹‰æŒ‡ä»¤ã€main.tsæ³¨å†ŒæŒ‡ä»¤</h3>
      <a href="https://www.bilibili.com/video/BV1dW4y1a7f8/">bç«™è§†é¢‘</a>
      <hr />
      <div v-font-size-color="{ color, fontSize }">æµ‹è¯•å­—ä½“</div>
      <el-button @click="changeFontSizeColor"> æ”¹å˜å­—ä½“å¤§å°å’Œé¢œè‰² </el-button>
      <el-button @click="changeDomBgcColor"> æ”¹å˜èƒŒæ™¯é¢œè‰² </el-button>
      <hr />
      <div v-font-size-col:[styleField]="fontSizeAndColor">æµ‹è¯•å­—ä½“</div>
      <el-button @click="changeFontSize"> æ”¹å˜å­—ä½“å¤§å° </el-button>
      <el-button @click="changeColor"> æ”¹å˜å­—ä½“é¢œè‰² </el-button>
    </div>
    <el-button type="warning" v-longpress="longpress">é•¿æŒ‰2sè§¦å‘æŒ‡ä»¤</el-button>
    <el-button type="primary" v-debounce="debounceClick"
      >é˜²æŠ–æŒ‰é’® (0.5ç§’åæ‰§è¡Œ)</el-button
    >
    <el-button type="primary" v-throttle="throttleClick"
      >èŠ‚æµæŒ‰é’® (æ¯éš”1Sç§’åæ‰§è¡Œ)</el-button
    >
    <el-input
      placeholder="è¯·è¾“å…¥å†…å®¹"
      v-model="data"
      style="width: 400px; height: 36px"
    >
      <template #append>
        <el-button v-copy="data">å¤åˆ¶</el-button>
      </template>
    </el-input>
    <el-card
      class="card-box"
      v-waterMarker="{
        text: 'è‡ªå®šä¹‰æ°´å°æŒ‡ä»¤',
        textColor: 'rgba(180, 180, 180, 0.6)',
      }"
    >
      <svg
        data-v-07b8fae0=""
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        xml:space="preserve"
        width="400"
        height="500"
      >
        <g transform="translate(200,110)">
          <g stroke="#000" stroke-width="1.5">
            <line
              stroke-opacity="1"
              x1="98.45981917939729"
              y1="35.223751824327955"
              x2="-79.95103921621164"
              y2="67.58533849981897"
            ></line>
            <line
              stroke-opacity="1"
              x1="-79.95103921621164"
              y1="67.58533849981897"
              x2="-18.505298739003013"
              y2="-102.78100975049361"
            ></line>
            <line
              stroke-opacity="1"
              x1="-18.505298739003013"
              y1="-102.78100975049361"
              x2="98.45981917939729"
              y2="35.223751824327955"
            ></line>
          </g>
          <g stroke="#fff" stroke-width="1.5">
            <circle
              fill="#1f77b4"
              cx="98.45981917939729"
              cy="35.223751824327955"
              r="8"
            ></circle>
            <circle
              fill="#ff7f0e"
              cx="-79.95103921621164"
              cy="67.58533849981897"
              r="8"
            ></circle>
            <circle
              fill="#2ca02c"
              r="8"
              cx="-18.505298739003013"
              cy="-102.78100975049361"
            ></circle>
          </g>
        </g>
      </svg>
    </el-card>
    <h3>æ¼”ç¤ºæŒ‰é’®æƒé™v-permission(å½“å‰è·¯ç”±åªç»™äº†ä¸‹é¢æŒ‰é’®å¢ã€æ”¹çš„æƒé™)</h3>
    <el-row>
      <el-button v-permission="[Route.path, 'add']">å¢åŠ </el-button>
      <el-button v-permission="[Route.path, 'remove']">åˆ é™¤</el-button>
      <el-button v-permission="[Route.path, 'edit']">ä¿®æ”¹</el-button>
      <el-button v-permission="[Route.path, 'search']">æŸ¥è¯¢</el-button>
    </el-row>
    <el-button circle v-draggable class="drag-box">æ‹–æ‹½æŒ‡ä»¤</el-button>
  </div>
</template>

<script setup>
import { ref, useSlots } from "vue";
import { useRoute } from "vue-router";

const Route = useRoute();
const slots = useSlots();
console.log("å½“å‰slotsï¼š", slots);
const data = ref("æˆ‘æ˜¯è¢«å¤åˆ¶çš„å†…å®¹ ğŸ’ ğŸ‰ ğŸŠ");
//XXX æƒ…å†µ 1
const color = ref("red");
const fontSize = ref("15px");
const bgcColor = ref("pink");

const changeFontSizeColor = () => {
  color.value = color.value == "green" ? "red" : "green";
  fontSize.value = fontSize.value == "30px" ? "15px" : "30px";
};
const changeDomBgcColor = () => {
  bgcColor.value = bgcColor.value == "yellow" ? "pink" : "yellow";
};

//XXX æƒ…å†µ 2
const styleField = ref("fontSize");
const fontSizeAndColor = ref("20px");

const changeFontSize = () => {
  styleField.value = "fontSize";
  fontSizeAndColor.value = "40px";
};
const changeColor = () => {
  styleField.value = "color";
  fontSizeAndColor.value = "red";
};

const longpress = () => {
  ElMessage.warning("é•¿æŒ‰äº‹ä»¶è§¦å‘æˆåŠŸ ğŸ‰ğŸ‰ğŸ‰");
};
const debounceClick = () => {
  ElMessage.success("æˆ‘æ˜¯é˜²æŠ–æŒ‰é’®è§¦å‘çš„äº‹ä»¶ ğŸğŸ“ğŸŒ");
};
const throttleClick = () => {
  ElMessage.success("æˆ‘æ˜¯èŠ‚æµæŒ‰é’®è§¦å‘çš„äº‹ä»¶ ğŸğŸ“ğŸŒ");
};
</script>

<style scoped>
.el-button {
  margin: 8px;
}

.card-box {
  width: 100%;
  height: 230px;
}

.drag-box {
  width: 70px;
  height: 70px;
  text-align: center;
  line-height: 70px;
  border-radius: 50%;
  user-select: none;
  color: #ffffff;
  font-weight: bold;
  background-color: #00c6ff;
  box-shadow: 0 0 0.1rem #00c6ff, 0 0 0.2rem #00c6ff, 0 0 0.3rem #00c6ff,
    0 0 0.4rem #00c6ff;
}
</style>
